
<div class="text-center bg-secondary border border-dark rounded m-4 p-3
">
    <h2 class="m-2 text-light">Liste des taches</h2>
</div>

<div class="row justify-content-center m-3">
    <div class="col-lg-9">
      
       <p *ngIf="errorMsg.length > 1; else noData">{{errorMsg}}</p>
        <ng-template #noData>
        <ul class="list-group">            
            <li class="list-group-item border border-secondary shadow p-3 mb-2 bg-body rounded" *ngFor="let todo of todos ;let i = index">       
                    <div class="row " [ngClass]="{inprogress:todo.todoStatus,finish:!todo.todoStatus}">
                        <div class="col-6 mx-auto">
                            <a [href]="todo.image">
                                <img class="img-fluid" [src]="todo.image"  />
                            </a>   
                            <div class="text-primary">
                                <span>{{todo.todoName}} - {{todo.todoDay | date:'dd/MM/yyyy'}}</span>                           
                            </div>
                        </div>                      
                        <div class="col-4 my-auto">
                            <button type="button" class="btn btn-primary m-1" [disabled]="todo.todoStatus"
                            (click)="onChangeStatus(i)"
                            >En Cours</button>
                            <button type="button" class="btn btn-success m-1" [disabled]="!todo.todoStatus"
                            (click)="onChangeStatus(i)"
                            >Termin√©</button>   
                            <button class="btn btn-primary m-1" (click)="onView(i)">En Savoir Plus</button>                                                                
                        </div>
                        <div>
                            <div class="row">
                                <div class="col-4">                         
                                   <!-- Button trigger modal -->
                                <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal">
                                    Modifier
                                </button>                                
                                <!-- Modal -->
                                <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                    <div class="modal-dialog modal-dialog-centered">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                        <h5 class="modal-title" id="exampleModalLabel">Modification</h5>
                                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                        </div>
                                        <div class="modal-body">
                                            <div class="">
                                                <input class="form-control m-2" (change)="onChangeIsModif(i)" [(ngModel)]="todo.todoName"  />
                                            </div>                        
                                        </div>
                                        <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">fermer</button>
                                        <button type="button" (click)="todo.isModif=!todo.isModif;" class="btn btn-primary" data-bs-dismiss="modal" aria-label="Close">Sauvegarder</button>
                                        </div>
                                    </div>
                                    </div>
                                </div>
                                    <button type="button" class="btn btn-danger m-1" 
                                    (click)="onDelete(todo.idTodo)"
                                    >Supprimer</button>   
                                </div>                     
                            </div>                         
                        </div>                        
                    </div>
            </li>             
          </ul>
        </ng-template>     
    </div>    
</div>
